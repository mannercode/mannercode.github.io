@startuml

@startuml
Frontend -> Gateway: 영화 목록 요청\nGET /showtime-creation/movies
    Gateway -> MoviesService: searchMovies()
    Gateway <-- MoviesService: movies[]
Frontend <-- Gateway: movies[]

Frontend -> Gateway: 극장 목록 요청\nGET /showtime-creation/theaters
    Gateway -> TheatersService: searchTheaters()
    Gateway <-- TheatersService: theaters[]
Frontend <-- Gateway: theaters[]

Frontend -> Gateway: 상영시간 목록 요청\nPOST /showtime-creation/showtimes/search
    note right
        SearchShowtimesDto {
            theaterIds,
        }
    end note
    Gateway -> ShowtimesService: searchShowtimes(searchDto)
    Gateway <-- ShowtimesService: showtimes[]
Frontend <-- Gateway: showtimes[]

Frontend -> Gateway: 상영시간 생성 요청\nPOST /showtime-creation/showtimes
    note right
        CreateShowtimesDto {
            movieId,
            theaterIds,
            startTimes,
            durationMinutes
        }
    end note
    Gateway -> ShowtimesService: createShowtimes(createDto)
        ShowtimesService -> MoviesService: moviesExist(movieId)
        ShowtimesService <-- MoviesService: true

        ShowtimesService -> TheatersService: theatersExist(theaterIds)
        ShowtimesService <-- TheatersService: true

        ShowtimesService -> ShowtimesService: createShowtimes(createDto)
    Gateway <-- ShowtimesService: showtimes[]
Frontend <-- Gateway: Created(201)

@enduml

@enduml